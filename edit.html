<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library City</title>
  <link rel="stylesheet" href="./assets/styles/index.css">
</head>
<body>
  
 <!-- Nav Bar -->
 <nav class="nav">
  <a href="#" class="nav__link nav__title">Library City</a href="#">
  <ul class="nav__nav-list">
    <li class="nav__nav-item"><a href="#home" class="nav__link nav__link--small">Home</a></li>
    <li class="nav__nav-item"><a href="#books" class="nav__link nav__link--small">Bookshelf</a></li>
    <li class="nav__nav-item"><a href="#add" class="nav__link nav__link--small">Add Book</a></li>
    <li class="nav__nav-item"><label for="search"></label><input id='search' type="text" class="nav__search" placeholder="Author/Book"></li>
    <li class="nav__nav-item"><button class="nav__btn">Search</button></li>
  </ul>
  <span class="nav__burger-btn" onclick="document.querySelector('.nav__nav-list').classList.toggle('visible')">
    <div class="nav__slice"></div>
    <div class="nav__slice"></div>
    <div class="nav__slice"></div>
  </span>
</nav>

<!-- Edit Book -->
<form id="edit" class="formBook page" action=''>
  <h1 class="formBook__detail">Edit Book</h1>
  <div class="formBook__wrapper">
    <label for="title" class="formBook__label formBook__title--label">Title</label>
    <input id='title' type="text" class="formBook__title--input">
    <label for="author" class="formBook__label formBook__author--label">Author</label>
    <input id='author' type="text" class="formBook__author--input">
    <div class="formImg">
      <img src="./assets/images/book_cover.png" alt="Add Image" class="formImg__img">
      <label for="file" class="btn btn--setting-two formImg__btn">Change Image</label>
      <input id='file' style="display: none;" type='file'>
    </div>
    <label for="synopsis" class="formBook__label formBook__synopsis--label">Synopsis</label>
    <textarea id='synopsis' class="formBook__synopsis--textarea" name="synopsis" placeholder="This book is about...">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </textarea>
    <label for="published" class="formBook__label formBook__published--label">Published</label>
    <input id='published' type="date" class="formBook__published--input">
    <label for="numPages" class="formBook__label formBook__numPages--label">Pages</label>
    <input id='numPages' type="number" class="formBook__numPages--input">
    <label for="rating" class="formBook__label">Rating</label>
    <div id='rating' class="formBook__rating">
      <svg id='star1' class="formBook__star" fill="rgb(223, 223, 223)" stroke="black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>
      <svg id='star2' class="formBook__star"  fill="rgb(223, 223, 223)" stroke="black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>
      <svg id='star3' class="formBook__star "  fill="rgb(223, 223, 223)" stroke="black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>
      <svg id='star4' class="formBook__star "  fill="rgb(223, 223, 223)" stroke="black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>
      <svg id='star5' class="formBook__star"  fill="rgb(223, 223, 223)" stroke="black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>
    </div>
  </div>
  <div class="formBook__wrapper--action">
    <button class="btn btn--success formBook__btn">Edit Book</button>
    <button class="btn btn--setting-one formBook__btn">Cancel</button>
    <button class="btn btn--setting-danger formBook__btn">Delete</button>
  </div>
  </div>
</form>

<!-- Footer --> 
<footer class="footer">
  <p class="footer__text">&copy; Copyright 2020 Library City</p>
</footer>
<script>
  function updateRating() {
    
    function ratingHandler(action) {
      document.querySelector('.formBook__rating').addEventListener(action, e => {
        const allStars = document.querySelectorAll('.formBook__star');
        const svg = e.target.parentElement;
        const starNumber = +(svg.id.split('star')[1]);

        if (action === 'mouseover') {
          allStars.forEach((el, i) => {
            if (i < starNumber) {
              el.classList.add('formBook__star--hover');
            }
          });
        }

        if (action === 'mouseleave') {
          allStars.forEach((el, i) => {
            if (i < 5) {
              el.classList.remove('formBook__star--hover');
            }
          });
        }

        if (action === 'click') {
          const setRating = (num, color) => {
            allStars.forEach((el, i) => {
            if (i < num) {
              el.setAttribute('fill', color);
            }
          });
          }
          setRating(5, "rgb(223, 223, 223)"); // turn OFF all stars
          setRating(starNumber, 'yellow') // turn ON only clicked amount of stars
        }

      });
    }

    ratingHandler('mouseover'); // hover - adds class to target stars
    ratingHandler('mouseleave'); // leave - removes class when leaving parent element
    ratingHandler('click'); // click - alters fill attribute
  }
  updateRating();
</script>
</body>
</html>